#include "gamma_tuning.h"

#define TABLE_X {\
    0,     128,   256,   384,   512,   640,   768,   896,       \
    1024,  1024+128, 1280, 1536,  1792,  2048,  2304,  2560,    \
    2816,3072,  3072+256,  3584, 4096,  4608,  5120,  5120+512, \
    6144, 6144+512, 7168, 8192, 10240, 12288, 14336, 16384      \
}

#define USER_GAMMA {                                            \
    1.f, 0.3f, 0.4f, 0.46f, 0.52f, 0.58f, 0.62f, 0.66f,         \
    0.70f, 0.74f, 0.78f, 0.84f, 0.90f, 0.95f, 1.0f, 1.02f,      \
    1.038f, 1.055f, 1.065f, 1.075f, 1.08f, 1.08f, 1.08f, 1.075f,\
    1.07f, 1.065f, 1.06f, 1.05f, 1.032f, 1.02f, 1.01f, 1.f,     \
}

#define BASE_CONFIG {   \
    1 / 2.2f,           \
    -128,               \
    0,                  \
    0,                  \
    1 / 2.0f,           \
    0,                  \
    0,                  \
    0,                  \
    1 / 2.4f,           \
    -128,               \
    -512,               \
    0,                  \
    TABLE_X,            \
    USER_GAMMA          \
}


//extern const drc_compensation g_drc_compensation = {
#define DRC_COMPENSATION {  \
    1,  \
    0.15f,                   \
}

#define FILTER_BLACK_WHITE_ITEM {\
    NORMAL_GAMMA_VALUE_FLAG, NORMAL_GAMMA_VALUE_FLAG, NORMAL_GAMMA_VALUE_FLAG, \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384,     \
    16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384,     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384,     \
    16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384,     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384,     \
    16384, 16384, 16384, 16384, 16384, 16384, 16384, 16384,     \
}

#define FILTER_NEGATIVE_ITEM {\
    REVERSE_GAMMA_VALUE_FLAG, REVERSE_GAMMA_VALUE_FLAG, REVERSE_GAMMA_VALUE_FLAG, \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
    0, 0, 0, 0, 0, 0, 0, 0,                                     \
}

#define FILTER_BLUISH_ITEM {\
    GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG, NORMAL_GAMMA_VALUE_FLAG,\
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    0, 5432, 6240, 6767, 7167, 7495, 7773, 8016,                \
    8233, 8430, 8609, 8929, 9208, 9458, 9683, 9889,             \
    10080, 10257, 10422, 10578, 10864, 11123, 11360, 11579,     \
    11782, 11972, 12151, 12480, 13049, 13534, 13958, 14335,     \
}

#define FILTER_RESERVED_ITEM {\
    GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG,\
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
}

#define FILTER_RESERVED1_ITEM {\
    GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG,\
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
}

#define FILTER_RESERVED2_ITEM {\
    GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG,\
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
}

#define FILTER_RESERVED3_ITEM {\
    GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG,\
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
}

#define FILTER_RESERVED4_ITEM {\
    GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG, GAMMA_RATIO_FLAG,\
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
    10000, 10000, 10000, 10000, 10000, 10000, 10000, 10000,     \
}

#define GAMMA_FILTER_TABLE {\
    FILTER_BLACK_WHITE_ITEM,    \
    FILTER_NEGATIVE_ITEM,       \
    FILTER_BLUISH_ITEM,         \
    FILTER_RESERVED_ITEM,       \
    FILTER_RESERVED1_ITEM,      \
    FILTER_RESERVED2_ITEM,      \
    FILTER_RESERVED3_ITEM,      \
    FILTER_RESERVED4_ITEM,      \
}\

const gamma_tuning_parameters* meizu_tuning_get_gamma(void) {
    static const gamma_tuning_parameters data = {
        BASE_CONFIG,
        DRC_COMPENSATION,
        GAMMA_FILTER_TABLE
    };

    return &data;
}

